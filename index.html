<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è - –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –µ–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–≤–æ–¥–∞ –∑ –®–Ü–ü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2em;
            color: #666;
        }

        .lab-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 1.8em;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e9ecef;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #495057;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
        }

        .value-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #2980b9;
            text-align: center;
            margin-top: 5px;
        }

        .oscilloscope {
            background: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .oscilloscope canvas {
            width: 100%;
            background: #000;
            border-radius: 5px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .result-card h3 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .result-card .value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .result-card .unit {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .chart-container {
            width: 100%;
            height: 400px;
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-on { background: #27ae60; }
        .status-off { background: #e74c3c; }

        .formula-box {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .animated { animation: pulse 2s infinite; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è 1</h1>
            <p>–î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –µ–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–≤–æ–¥–∞ –∑ —à–∏—Ä–æ—Ç–Ω–æ-—ñ–º–ø—É–ª—å—Å–Ω–∏–º –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—á–µ–º (–®–Ü–ü)</p>
        </div>

        <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
        <div class="lab-section">
            <h2 class="section-title">üìö –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –æ—Å–Ω–æ–≤–∏</h2>
            <p style="font-size: 1.1em; line-height: 1.6; margin-bottom: 20px;">
                –®–∏—Ä–æ—Ç–Ω–æ-—ñ–º–ø—É–ª—å—Å–Ω–∏–π –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞—á (–®–Ü–ü) —Ä–µ–≥—É–ª—é—î –Ω–∞–ø—Ä—É–≥—É –Ω–∞ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —à–ª—è—Ö–æ–º –∑–º—ñ–Ω–∏ 
                <strong>—à–ø–∞—Ä—É–≤–∞—Ç–æ—Å—Ç—ñ (Œ≥)</strong> —ñ–º–ø—É–ª—å—Å—ñ–≤ –Ω–∞–ø—Ä—É–≥–∏. –û—Å–Ω–æ–≤–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏: –ø–ª–∞–≤–Ω–µ —Ä–µ–≥—É–ª—é–≤–∞–Ω–Ω—è 
                —à–≤–∏–¥–∫–æ—Å—Ç—ñ, –≤–∏—Å–æ–∫–∏–π –∫–∫–¥, –≤–∏—Å–æ–∫–∞ —à–≤–∏–¥–∫–æ–¥—ñ—è, –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–µ–∫—É–ø–µ—Ä–∞—Ü—ñ—ó.
            </p>
            
            <div class="formula-box">
                <strong>–û—Å–Ω–æ–≤–Ω—ñ —Ñ–æ—Ä–º—É–ª–∏:</strong><br>
                ‚Ä¢ –®–≤–∏–¥–∫—ñ—Å–Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞: œâ = (Œ≥¬∑U–ø - I—è¬∑R—è) / (k–ø–∑¬∑I—è + k–∑–∞–ª)<br>
                ‚Ä¢ –ú–µ—Ö–∞–Ω—ñ—á–Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞: œâ = (Œ≥¬∑U–ø) / k–ø–∑ - (R—è¬∑M) / k–ø–∑¬≤ - k–∑–∞–ª/k–ø–∑<br>
                ‚Ä¢ –®–ø–∞—Ä—É–≤–∞—Ç—ñ—Å—Ç—å: Œ≥ = t—ñ–º–ø / T
            </div>
        </div>

        <!-- –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
        <div class="lab-section">
            <h2 class="section-title">‚ö° –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞</h2>
            
            <div class="controls-grid">
                <div class="control-panel">
                    <h3>üéõÔ∏è –ü–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è</h3>
                    <div class="control-group">
                        <label>–ù–∞–ø—Ä—É–≥–∞ –∂–∏–≤–ª–µ–Ω–Ω—è U–ø (–í):</label>
                        <input type="range" id="voltage" min="100" max="400" value="220" step="10">
                        <div class="value-display" id="voltageValue">220 –í</div>
                    </div>
                    
                    <div class="control-group">
                        <label>–®–ø–∞—Ä—É–≤–∞—Ç—ñ—Å—Ç—å Œ≥ (%):</label>
                        <input type="range" id="dutyCycle" min="10" max="100" value="50" step="5">
                        <div class="value-display" id="dutyCycleValue">50%</div>
                    </div>
                    
                    <div class="control-group">
                        <label>–ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–º—É—Ç–∞—Ü—ñ—ó f (–∫–ì—Ü):</label>
                        <input type="range" id="frequency" min="1" max="10" value="5" step="0.5">
                        <div class="value-display" id="frequencyValue">5 –∫–ì—Ü</div>
                    </div>
                    
                    <div class="control-group">
                        <label>–ú–æ–º–µ–Ω—Ç –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è M (–ù¬∑–º):</label>
                        <input type="range" id="load" min="0" max="50" value="10" step="2">
                        <div class="value-display" id="loadValue">10 –ù¬∑–º</div>
                    </div>
                </div>

                <div class="control-panel">
                    <h3>üìä –°—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏</h3>
                    <p><span class="status-indicator status-on"></span>–°–∏—Å—Ç–µ–º–∞ —É–≤—ñ–º–∫–Ω–µ–Ω–∞</p>
                    <p><span class="status-indicator status-on"></span>–®–Ü–ü –∞–∫—Ç–∏–≤–Ω–∏–π</p>
                    <p><span class="status-indicator status-on"></span>–î–≤–∏–≥—É–Ω –ø—Ä–∞—Ü—é—î</p>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="startExperiment()">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É</button>
                        <button class="btn" onclick="resetData()">üîÑ –°–∫–∏–Ω—É—Ç–∏ –¥–∞–Ω—ñ</button>
                        <button class="btn" onclick="saveData()">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- –û—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ -->
        <div class="lab-section">
            <h2 class="section-title">üì∫ –û—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ - –§–æ—Ä–º–∞ –≤–∏—Ö—ñ–¥–Ω–æ—ó –Ω–∞–ø—Ä—É–≥–∏ –®–Ü–ü</h2>
            <div class="oscilloscope">
                <canvas id="oscilloscope" width="800" height="300"></canvas>
            </div>
            <p style="text-align: center; margin-top: 10px; color: #666;">
                –ó–µ–ª–µ–Ω–∞ –ª—ñ–Ω—ñ—è - –≤–∏—Ö—ñ–¥–Ω–∞ –Ω–∞–ø—Ä—É–≥–∞ –®–Ü–ü, –°–∏–Ω—è –ª—ñ–Ω—ñ—è - —Å—Ç—Ä—É–º —è–∫–æ—Ä—è
            </p>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å -->
        <div class="lab-section">
            <h2 class="section-title">üìà –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–º—ñ—Ä—é–≤–∞–Ω—å</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <h3>–®–≤–∏–¥–∫—ñ—Å—Ç—å –æ–±–µ—Ä—Ç–∞–Ω–Ω—è</h3>
                    <div class="value" id="speedResult">1450</div>
                    <div class="unit">–æ–±/—Ö–≤</div>
                </div>
                
                <div class="result-card">
                    <h3>–°—Ç—Ä—É–º —è–∫–æ—Ä—è</h3>
                    <div class="value" id="currentResult">12.5</div>
                    <div class="unit">–ê</div>
                </div>
                
                <div class="result-card">
                    <h3>–í–∏—Ö—ñ–¥–Ω–∞ –Ω–∞–ø—Ä—É–≥–∞</h3>
                    <div class="value" id="outputVoltageResult">110</div>
                    <div class="unit">–í</div>
                </div>
                
                <div class="result-card">
                    <h3>–ö–ö–î —Å–∏—Å—Ç–µ–º–∏</h3>
                    <div class="value" id="efficiencyResult">87</div>
                    <div class="unit">%</div>
                </div>
            </div>
        </div>

        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
        <div class="lab-section">
            <h2 class="section-title">üìä –®–≤–∏–¥–∫—ñ—Å–Ω—ñ —Ç–∞ –º–µ—Ö–∞–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h2>
            <div class="chart-container">
                <canvas id="characteristicsChart" width="800" height="350"></canvas>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü—è –¥–∞–Ω–∏—Ö -->
        <div class="lab-section">
            <h2 class="section-title">üìã –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ</h2>
            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>‚Ññ</th>
                        <th>Œ≥ (%)</th>
                        <th>U–≤–∏—Ö (–í)</th>
                        <th>I—è (–ê)</th>
                        <th>n (–æ–±/—Ö–≤)</th>
                        <th>M (–ù¬∑–º)</th>
                        <th>œâ (—Ä–∞–¥/—Å)</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <!-- –î–∞–Ω—ñ –±—É–¥—É—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ -->
                </tbody>
            </table>
        </div>

        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è -->
        <div class="lab-section">
            <h2 class="section-title">‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="control-panel">
                    <h4>–ó–∞–≤–¥–∞–Ω–Ω—è 1: –®–≤–∏–¥–∫—ñ—Å–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
                    <p>–ó–º—ñ–Ω—é–π—Ç–µ —à–ø–∞—Ä—É–≤–∞—Ç—ñ—Å—Ç—å –≤—ñ–¥ 20% –¥–æ 90% —Ç–∞ –∑–∞–ø–∏—Å—É–π—Ç–µ –¥–∞–Ω—ñ</p>
                    <button class="btn" onclick="task1()">–í–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è 1</button>
                </div>
                
                <div class="control-panel">
                    <h4>–ó–∞–≤–¥–∞–Ω–Ω—è 2: –ú–µ—Ö–∞–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
                    <p>–ó–º—ñ–Ω—é–π—Ç–µ –º–æ–º–µ–Ω—Ç –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –¥–æ—Å–ª—ñ–¥–∂—É–π—Ç–µ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å œâ(M)</p>
                    <button class="btn" onclick="task2()">–í–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è 2</button>
                </div>
                
                <div class="control-panel">
                    <h4>–ó–∞–≤–¥–∞–Ω–Ω—è 3: –ê–Ω–∞–ª—ñ–∑ —Ñ–æ—Ä–º–∏ —Å–∏–≥–Ω–∞–ª—É</h4>
                    <p>–î–æ—Å–ª—ñ–¥—ñ—Ç—å —Ñ–æ—Ä–º—É –≤–∏—Ö—ñ–¥–Ω–æ—ó –Ω–∞–ø—Ä—É–≥–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö Œ≥</p>
                    <button class="btn" onclick="task3()">–í–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è 3</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
        let experimentData = [];
        let isRunning = false;
        let animationId = null;

        // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–≤–∏–≥—É–Ω–∞ (—Ç–∏–ø–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è)
        const motorParams = {
            R—è: 0.5,      // –û–ø—ñ—Ä —è–∫–æ—Ä—è, –û–º
            k–ø–∑: 0.015,   // –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –∑–±—É–¥–∂–µ–Ω–Ω—è
            k–∑–∞–ª: 50,     // –ó–∞–ª–∏—à–∫–æ–≤–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç
            I–Ω: 20,       // –ù–æ–º—ñ–Ω–∞–ª—å–Ω–∏–π —Å—Ç—Ä—É–º, –ê
            n–Ω: 1500      // –ù–æ–º—ñ–Ω–∞–ª—å–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å, –æ–±/—Ö–≤
        };

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplayValues();
            drawOscilloscope();
            drawCharacteristics();
            
            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–ª—è —Å–ª–∞–π–¥–µ—Ä—ñ–≤
            document.getElementById('voltage').addEventListener('input', updateAll);
            document.getElementById('dutyCycle').addEventListener('input', updateAll);
            document.getElementById('frequency').addEventListener('input', updateAll);
            document.getElementById('load').addEventListener('input', updateAll);
        });

        function updateDisplayValues() {
            const voltage = document.getElementById('voltage').value;
            const dutyCycle = document.getElementById('dutyCycle').value;
            const frequency = document.getElementById('frequency').value;
            const load = document.getElementById('load').value;
            
            document.getElementById('voltageValue').textContent = voltage + ' –í';
            document.getElementById('dutyCycleValue').textContent = dutyCycle + '%';
            document.getElementById('frequencyValue').textContent = frequency + ' –∫–ì—Ü';
            document.getElementById('loadValue').textContent = load + ' –ù¬∑–º';
        }

        function calculateMotorParameters() {
            const U–ø = parseFloat(document.getElementById('voltage').value);
            const Œ≥ = parseFloat(document.getElementById('dutyCycle').value) / 100;
            const M = parseFloat(document.getElementById('load').value);
            
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –¥–≤–∏–≥—É–Ω–∞
            const U–≤–∏—Ö = Œ≥ * U–ø;
            const I—è = Math.sqrt(M / motorParams.k–ø–∑);
            const œâ = (Œ≥ * U–ø - I—è * motorParams.R—è) / (motorParams.k–ø–∑ * I—è + motorParams.k–∑–∞–ª);
            const n = œâ * 60 / (2 * Math.PI) * 10; // –æ–±/—Ö–≤
            const efficiency = (M * œâ) / (U–≤–∏—Ö * I—è) * 100;
            
            return {
                U–≤–∏—Ö: U–≤–∏—Ö.toFixed(1),
                I—è: I—è.toFixed(1),
                n: Math.max(0, n).toFixed(0),
                œâ: Math.max(0, œâ).toFixed(2),
                efficiency: Math.min(100, Math.max(0, efficiency)).toFixed(0),
                Œ≥: (Œ≥ * 100).toFixed(0),
                M: M
            };
        }

        function updateResults() {
            const params = calculateMotorParameters();
            
            document.getElementById('speedResult').textContent = params.n;
            document.getElementById('currentResult').textContent = params.I—è;
            document.getElementById('outputVoltageResult').textContent = params.U–≤–∏—Ö;
            document.getElementById('efficiencyResult').textContent = params.efficiency;
        }

        function updateAll() {
            updateDisplayValues();
            updateResults();
            drawOscilloscope();
            drawCharacteristics();
        }

        function drawOscilloscope() {
            const canvas = document.getElementById('oscilloscope');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // –û—á–∏—â–µ–Ω–Ω—è canvas
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, width, height);
            
            // –°—ñ—Ç–∫–∞
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            for (let i = 0; i < width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += 30) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            const Œ≥ = parseFloat(document.getElementById('dutyCycle').value) / 100;
            const f = parseFloat(document.getElementById('frequency').value);
            const U–ø = parseFloat(document.getElementById('voltage').value);
            
            // –ü–µ—Ä—ñ–æ–¥–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            const periods = 3;
            const samplesPerPeriod = width / periods;
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –Ω–∞–ø—Ä—É–≥–∏ –®–Ü–ü (–∑–µ–ª–µ–Ω–∞ –ª—ñ–Ω—ñ—è)
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const t = (x / width) * periods;
                const periodPos = (t % 1);
                let voltage = 0;
                
                if (periodPos < Œ≥) {
                    voltage = U–ø;
                }
                
                const y = height - (voltage / U–ø) * (height * 0.8) - height * 0.1;
                
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è —Å—Ç—Ä—É–º—É (—Å–∏–Ω—è –ª—ñ–Ω—ñ—è)
            const I—è = parseFloat(calculateMotorParameters().I—è);
            ctx.strokeStyle = '#0088ff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let x = 0; x < width; x++) {
                const t = (x / width) * periods;
                const periodPos = (t % 1);
                let current = 0;
                
                if (periodPos < Œ≥) {
                    // –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–µ –Ω–∞—Ä–æ—Å—Ç–∞–Ω–Ω—è —Å—Ç—Ä—É–º—É
                    current = I—è * (1 - Math.exp(-periodPos * 10));
                } else {
                    // –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–∞–ª—å–Ω–µ —Å–ø–∞–¥–∞–Ω–Ω—è —Å—Ç—Ä—É–º—É
                    current = I—è * Math.exp(-(periodPos - Œ≥) * 5);
                }
                
                const y = height - (current / (I—è * 1.2)) * (height * 0.4) - height * 0.55;
                
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // –ü—ñ–¥–ø–∏—Å–∏
            ctx.fillStyle = '#00ff00';
            ctx.font = '14px Arial';
            ctx.fillText('U–≤–∏—Ö', 10, 30);
            
            ctx.fillStyle = '#0088ff';
            ctx.fillText('I—è', 10, 50);
        }

        function drawCharacteristics() {
            const canvas = document.getElementById('characteristicsChart');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // –û—á–∏—â–µ–Ω–Ω—è
            ctx.fillStyle = '#fff';
            ctx.fillRect(0, 0, width, height);
            
            // –°—ñ—Ç–∫–∞
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1;
            for (let i = 0; i < width; i += 80) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i < height; i += 50) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            // –û—Å—ñ
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, height - 50);
            ctx.lineTo(width - 20, height - 50);
            ctx.moveTo(50, height - 50);
            ctx.lineTo(50, 20);
            ctx.stroke();
            
            // –®–≤–∏–¥–∫—ñ—Å–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö Œ≥
            const gammaValues = [0.3, 0.5, 0.7, 0.9];
            const colors = ['#e74c3c', '#f39c12', '#27ae60', '#3498db'];
            
            gammaValues.forEach((gamma, index) => {
                ctx.strokeStyle = colors[index];
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                for (let i = 0; i <= 100; i++) {
                    const current = i * 0.3; // –°—Ç—Ä—É–º –≤—ñ–¥ 0 –¥–æ 30–ê
                    const U–ø = 220;
                    const speed = Math.max(0, (gamma * U–ø - current * motorParams.R—è) / 
                                          (motorParams.k–ø–∑ * current + motorParams.k–∑–∞–ª)) * 10;
                    
                    const x = 50 + (current / 30) * (width - 100);
                    const y = height - 50 - (speed / 2000) * (height - 100);
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.stroke();
                
                // –ü—ñ–¥–ø–∏—Å
                ctx.fillStyle = colors[index];
                ctx.font = '12px Arial';
                ctx.fillText(`Œ≥ = ${(gamma*100).toFixed(0)}%`, width - 100, 30 + index * 20);
            });
            
            // –ü—ñ–¥–ø–∏—Å–∏ –æ—Å–µ–π
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('–°—Ç—Ä—É–º —è–∫–æ—Ä—è, –ê', width/2 - 50, height - 10);
            ctx.save();
            ctx.translate(20, height/2);
            ctx.rotate(-Math.PI/2);
            ctx.fillText('–®–≤–∏–¥–∫—ñ—Å—Ç—å, –æ–±/—Ö–≤', -50, 0);
            ctx.restore();
        }

        function startExperiment() {
            if (!isRunning) {
                isRunning = true;
                const params = calculateMotorParameters();
                
                // –î–æ–¥–∞—î–º–æ –¥–∞–Ω—ñ –≤ —Ç–∞–±–ª–∏—Ü—é
                experimentData.push(params);
                updateDataTable();
                
                // –ê–Ω—ñ–º–∞—Ü—ñ—è
                document.querySelector('.oscilloscope').classList.add('animated');
                setTimeout(() => {
                    document.querySelector('.oscilloscope').classList.remove('animated');
                }, 2000);
                
                setTimeout(() => {
                    isRunning = false;
                }, 1000);
            }
        }

        function updateDataTable() {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = '';
            
            experimentData.forEach((data, index) => {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = index + 1;
                row.insertCell(1).textContent = data.Œ≥;
                row.insertCell(2).textContent = data.U–≤–∏—Ö;
                row.insertCell(3).textContent = data.I—è;
                row.insertCell(4).textContent = data.n;
                row.insertCell(5).textContent = data.M;
                row.insertCell(6).textContent = data.œâ;
            });
        }

        function resetData() {
            experimentData = [];
            updateDataTable();
            alert('–î–∞–Ω—ñ —Å–∫–∏–Ω—É—Ç–æ!');
        }

        function saveData() {
            if (experimentData.length === 0) {
                alert('–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è!');
                return;
            }
            
            let csv = 'N,Œ≥(%),U–≤–∏—Ö(–í),I—è(–ê),n(–æ–±/—Ö–≤),M(–ù¬∑–º),œâ(—Ä–∞–¥/—Å)\n';
            experimentData.forEach((data, index) => {
                csv += `${index + 1},${data.Œ≥},${data.U–≤–∏—Ö},${data.I—è},${data.n},${data.M},${data.œâ}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lab_data_PWM.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function task1() {
            alert('–ó–∞–≤–¥–∞–Ω–Ω—è 1: –ó–º—ñ–Ω—é–π—Ç–µ —à–ø–∞—Ä—É–≤–∞—Ç—ñ—Å—Ç—å –≤—ñ–¥ 20% –¥–æ 90% –∑ –∫—Ä–æ–∫–æ–º 10% —Ç–∞ –∑–∞–ø–∏—Å—É–π—Ç–µ –¥–∞–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è');
        }

        function task2() {
            alert('–ó–∞–≤–¥–∞–Ω–Ω—è 2: –ü—Ä–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π —à–ø–∞—Ä—É–≤–∞—Ç–æ—Å—Ç—ñ 70% –∑–º—ñ–Ω—é–π—Ç–µ –º–æ–º–µ–Ω—Ç –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥ 5 –¥–æ 40 –ù¬∑–º');
        }

        function task3() {
            alert('–ó–∞–≤–¥–∞–Ω–Ω—è 3: –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π—Ç–µ –∑–∞ —Ñ–æ—Ä–º–æ—é —Å–∏–≥–Ω–∞–ª—É –Ω–∞ –æ—Å—Ü–∏–ª–æ–≥—Ä–∞—Ñ—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å Œ≥ —Ç–∞ —á–∞—Å—Ç–æ—Ç–∏');
        }

        // –ü–æ—á–∞—Ç–∫–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
        updateAll();
    </script>
</body>
</html>
